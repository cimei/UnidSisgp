{% extends "base.html" %}
{% block content %}
<div class="jumbotron">
  {% if unid_dados != None%}
    <h5><b>Objetos nos PGs da unidade {{unid_dados.undSiglaCompleta}} e suas subordinadas</b></h5>
  {% elif usuario != None %}  
  <h5><b>Objetos relacionados às atividades de {{usuario.pesNome}} ({{unid.undSigla}})</b></h5>
  {% else %}
    <h5><b>Objetos no PG {{pg}}</b></h5>

    {% if current_user.is_authenticated %}
      <div class = "row">
        <div class="col-1">
          <a href="{{url_for('objetos.add_objeto',plano_id=pg, pacto_id='*')}}" class="btn btn-primary active" role="button" aria-pressed="true">Inserir novo</a>
        </div>
        <div class="col">
          <small class="form-text text-muted">Ou clique em um número de sequência para alterar dados do respectivo instrumento.</small>
        </div>
      </div>  
      <br>
    {% endif %}
  {% endif %}  

<caption>
  <div class="row">
      <div class="col">
        <p>Lista do(s) <span class="badge badge-pill badge-primary">{{quantidade}}</span> Objeto(s). </p>
      </div>
  </div>
</caption>

<div class="container" style="overflow-y:auto; width:2000px; height:400px">

  <table class="table table-striped table-hover table-sm">
    <caption>Objetos</caption>
    <thead>
      <tr>
        <th scope="col"><p align = "center">#</p></th>
        {% if unid_dados != None%} 
          <th scope="col"><p align = "center">Unidade</p></th>
        {% endif %}  
        <th scope="col"><p align = "center">Descrição</p></th>
        <th scope="col"><p align = "center">Tipo</p></th>
        <th scope="col"><p align = "center">Chave</p></th>
        <th scope="col"><p align = "center">Ativo</p></th>
      </tr>
    </thead>
    <tbody>

      {% for o in objetos %}

      <tr>
        
        <th scope="row"><p align = "center"> 
          {% if unid_dados != None or usuario != None %}
            {{objetos.index(o) + 1}} 
          {% else %}
            <a href="{{url_for('objetos.altera_objeto', objeto_id = o.objetoId, plano_id = pg)}}"><abbr title="Clique aqui atualizar">{{objetos.index(o) + 1}}</abbr></a>  
          {% endif %}
        </p></th>

        {% if unid_dados != None%} 
          <td><p align = "center"> {{o.undSigla}} </p></td>
        {% endif %}  
        <td><p align = "center"> {{o.descricao}} </p></td>
        <td><p align = "center"> {{o.tipo}} </p></td>
        <td><p align = "center"> {{o.chave}} </p></td>
        <td><p align = "center"> {% if o.ativo == True %}Sim{% else %}Não{% endif %} </p></td>
      </tr>

      {% endfor %}

    </tbody>
  </table>

</div>

</div>
{% endblock %}
